alias gfp='git fetch --prune'
alias gf='git fetch'
alias gpap='git pull --no-rebase --prune'
alias gp='git pull'
alias gpm='git fetch origin master:master'
alias python='python3'
alias lcs='echo $?'
alias fnmsetup='eval "$(fnm env --use-on-cd)"'

if command -v zoxide &> /dev/null; then
  alias cd="zd"
  zd() {
    if [ $# -eq 0 ]; then
      builtin cd ~ && return
    elif [ -d "$1" ]; then
      builtin cd "$1"
    else
      z "$@" && printf "\U000F17A9 " && pwd || echo "Error: Directory not found"
    fi
  }
fi

function findandkill() {
    lsof -t -i tcp:$1 | xargs kill -9
}
alias killport=findandkill
function rebasemaster() {
    git switch master
    git pull --prune
    git switch -
    git rebase master
}

function git-delete-merged-branches() {
    git checkout -q master && git for-each-ref refs/heads/ "--format=%(refname:short)" --sort=-committerdate | while read branch; do mergeBase=$(git merge-base master $branch) && [[ $(git cherry master $(git commit-tree $(git rev-parse $branch^{tree}) -p $mergeBase -m _)) == "-"* ]] && git branch -D $branch; done
}